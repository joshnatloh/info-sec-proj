{% extends "employeeBase.html" %} 
{% set permissions = {1:"Super Administrator", 2:"Employee"} %}

{% block content %}
<div class="d-flex flex-column align-items-start justify-content-start mt-2 w-100">
    <div class="d-flex flex-row align-items-start justify-content-between w-100">
        <h2 class="fs-1 fw-bold pb-1">Employee Management</h2>
        <a href="{{url_for('employeeManagementDetailsEdit', employeeID=employee.id)}}">
            <div class="tw-flex tw-items-center tw-justify-center bg-primary tw-py-3.5 tw-px-5 tw-rounded-xl hover:tw-shadow-lg tw-transition-shadow tw-duration-200">
                <p class="tw-text-sm tw-font-medium tw-tracking-wide tw-text-white tw-whitespace-nowrap">Edit</p>
            </div>
        </a>
    </div>
    <div class="d-flex flex-row align-items-start justify-content-start w-100 mt-4">
        {% with image=employee.picture %}
            {% include '/includes/accountProfilePicture.html' %}
        {% endwith %}
        <div class="d-flex flex-grow-1 flex-column align-items-start justify-content-start ms-5 mt-2">
            <div class="d-flex flex-row align-items-start justify-content-start w-100">
                <div class="">
                    <h2 class="fs-1 fw-bold pb-1">{{ employee.username }}</h2>
                    <h3 class="fs-3 fw-normal">{{ permissions[employee.permissions] }}</h3>
                </div>
            </div>
            <div class="w-100">
                <div class="row row-cols-2 w-100 mt-4 mx-0">
                    {% with label='Email', data=employee.email %}
                        {% include '/includes/accountDetailGridItem.html' %}
                    {% endwith %}
                    {% with label='Contact number', data=employee.contact_no %}
                        {% include '/includes/accountDetailGridItem.html' %}
                    {% endwith %}
                    {% with label='Address', data=employee.address %}
                        {% include '/includes/accountDetailGridItem.html' %}
                    {% endwith %}
                    {% with label='Account creation date', data=employee.creation_datetime %}
                        {% include '/includes/accountDetailGridItem.html' %}
                    {% endwith %}
                </div>
            </div>
        </div>
    </div>
    <div style='margin-top:100px' display:'inline'>
        <form method="POST">
            {% if employee.disable_status == 'Y' %}
            <button type="button" class='btn btn-danger' disabled="true" style="background-color: #dc3545;">
                Disable
            </button>
            {% else %}
            <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#myModal_{{employee.id}}" style="background-color: #dc3545;">
                Disable
            </button>
            {% endif %}

            <div class="modal fade" id="myModal_{{employee.id}}">
                <div class="modal-dialog">
                    <div class="modal-content">

                    <!-- Modal Header -->
                    <div class="modal-header">
                        <h4 class="modal-title">Disable Confirmation</h4>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>

                    <!-- Modal body -->
                    <div class="modal-body">
                        Are you sure you want to disable the account {{ employee.username }}?
                    </div>

                    <!-- Modal footer -->
                    <div class="modal-footer">
                            {{ form.hidden_tag() }}
                            {{ form.submit(class='btn btn-danger') }}
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    </div>

                    </div>
                </div>
            </div>
            {{ enable.hidden_tag() }}
            {{ enable.submit1(class='btn btn-primary', style='background-color: #0d6efd') }}
        </form>
    </div>
</div>
{% endblock %}